<!DOCTYPE html>
<html>
<head>
  <title>focusd</title>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <link rel="stylesheet" type="text/css" href="./styles/demo.css" />
</head>
<body id="demo">

<h1><a href="./demo.html">focusd demo</a></h1>
<ol id="ruler">
  <li class="px480"><p>480px</p></li>
  <li class="px640"><p>640px</p></li>
  <li class="px800"><p>800px</p></li>
  <li class="px1200"><p>1200px</p></li>
  <li class="px320"><p>320px</p></li>
</ol>

<div id="prv" class="focusd"></div></td>

<ul id="trsfrm">
  <li><b>INPUT</b> <b>AS</b>
<input name="t1" type="radio" id="r1doc"><label for="r1doc">document</label>
<input name="t1" type="radio" id="r1law"><label for="r1law">legislation</label>
<input name="t1" type="radio" id="r1case"><label for="r1case">case law</label>
<input name="t1" type="radio" id="r1mail"><label for="r1mail">email</label>
<input name="t1" type="radio" id="r1img"><label for="r1img">image</label>
    <textarea id="in1" onkeypress="rfsh()"></textarea>
  </li>
  <li><h4>MARKUP</h4>
    <textarea id="mu" onkeypress="rfsh()">{}</textarea>
  </li>
  <li><b>INPUT 2</b> <b>AS</b>
<input name="t2" type="radio" id="r2doc"><label for="r2doc">document</label>
<input name="t2" type="radio" id="r2law"><label for="r2law">legislation</label>
<input name="t2" type="radio" id="r2case"><label for="r2case">case law</label>
<input name="t2" type="radio" id="r2mail"><label for="r2mail">email</label>
<input name="t2" type="radio" id="r2img"><label for="r2img">image</label>
    <textarea id="in2" onblur="rfsh()"></textarea>
  </li>
  <li><h3>HTML (post)</h3><textarea id="htm_post"></textarea></li>
  <li></li>
  <li><h3>HTML (pre)</h3><textarea id="htm_pre"></textarea></li>
  <li><h3>MD (post markup)</h3><textarea id="md_post"></textarea></li>
  <li></li>
  <li><h3>MD (pre markup)</h3><textarea id="md_pre"></textarea></li>
</ul>


<script type="text/javascript">

var el = {
  i1:  document.getElementById('in1'),
  mu:  document.getElementById('mu'),
  i2:  document.getElementById('in2'),
  mp:  document.getElementById('md_pre'),
  mr:  document.getElementById('md_post'),
  hp:  document.getElementById('htm_pre'),
  hr:  document.getElementById('htm_post'),
  pv:  document.getElementById('prv')
}




var focusd_type1 = 'doc'
var defaultTxt = ``

var focusd_type2 = 'law'
var defaultTxt2 = `
`


function rfsh() {
  [el.i1,el.i2,el.mr,el.hr,el.mp,el.hp].forEach(function(txt) {
    txt.style.height = '100px';
    txt.style.height = (txt.scrollHeight-10)+"px";
  })

  //-- so we dont cause multiple render on doc load
  if (el.i1.value == '') return

  var fmup = JSON.parse(el.mu.innerHTML||'{}')
  fmup.in1 = fmup.in1 || {};
  fmup.in2 = fmup.in2 || {};

  ['doc','img','mail','law','case'].forEach(function(type) {
    if (document.getElementById('r1'+type).checked)
      fmup.in1.css = type
    if (document.getElementById('r2'+type).checked)
      fmup.in2.css = type
  })

  // console.log('el.i1.val\n', el.i1.value)
  console.log('fmup', fmup)
  // console.log('el.i2.val\n', el.i2.value)
  el.pv.innerHTML = postproc(markup(el.i1.value, fmup, el.i2.value))
}


document.addEventListener("DOMContentLoaded", function(event) {
  marked.setOptions({
    gfm: true, //smartLists:true,
    breaks: true, //baseUrl:'#'
  })

  document.getElementById('r1'+focusd_type1||'doc').click()
  document.getElementById('r2'+focusd_type2||'law').click()

  el.i1.innerHTML = defaultTxt
  el.i2.innerHTML = defaultTxt2||''
  rfsh()
})


</script>
<script src="../focusd/lib/marked.min.js"></script>

</body>
